{% for task in tasks %}
<div class="task-item" id="task-{{ task.id }}">
	<div class="task-header">
		<div
			style="
				font-weight: bold;
				font-size: 1.1em;
				display: flex;
				align-items: center;
				gap: 10px;
			"
		>
			{{ task.title }} {% if task.is_public %}
			<span
				title="Ð’Ð¸Ð´Ð½Ð° Ð² Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ðµ"
				style="
					font-size: 0.7em;
					background: var(--accent-color);
					color: black;
					padding: 2px 6px;
					border-radius: 4px;
				"
				>Public</span
			>
			{% endif %}
		</div>
		{% if task.deadline %}
		<div
			style="font-size: 0.9em; color: {{ '#ef4444' if task.deadline < now and not task.completed else 'rgba(255,255,255,0.6)' }}"
		>
			ðŸ“… {{ task.deadline.strftime('%d.%m.%Y') }}
		</div>
		{% endif %}
	</div>

	<div class="task-progress-bar">
		<div class="task-progress-fill" style="width: {{ task.progress }}%;"></div>
	</div>

	<div class="sub-tasks">
		{% if task.steps %} {% for step in task.steps %}
		<div class="step-item">
			<div
				class="custom-checkbox {{ 'checked' if step.completed else '' }}"
				onclick="toggleStep({{ step.id }})"
			></div>
			<span
				style="text-decoration: {{ 'line-through' if step.completed else 'none' }}"
				>{{ step.content }}</span
			>
		</div>
		{% endfor %} {% else %}
		<div class="step-item" style="margin-top: 10px">
			<div
				class="custom-checkbox {{ 'checked' if task.completed else '' }}"
				onclick="toggleTask({{ task.id }})"
			></div>
			<span>ÐžÑ‚Ð¼ÐµÑ‚Ð¸Ñ‚ÑŒ ÐºÐ°Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð½Ð¾Ðµ</span>
		</div>
		{% endif %}
	</div>
</div>
{% else %}
<div style="text-align: center; padding: 20px; opacity: 0.5">
	Ð—Ð°Ð´Ð°Ñ‡ Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ð²Ñ‹ÑˆÐµ!
</div>
{% endfor %}
